<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<ui:composition template="/layout/template.xhtml" 
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:jmoordbjsf="http://jmoordbjsf.com/taglib"
                xmlns:extensionviaje="http://xmlns.jcp.org/jsf/composite/extensionviaje"> 
    <ui:define name="content">
        <!--<h:outputStylesheet library="bsf" name="css/thumbnails.css"/>-->

        <style>
            .thumbnail { max-width: 100%; }
            img.thumbnail:hover, img.thumbnail:focus {
                border: 1px solid;
                border-color: #428BCA;
            }
        </style>
        <style>
            .thumbnail { max-width: 100%; }
            img.thumbnail:hover, img.thumbnail:focus {
                border: 1px solid;
                border-color: #428BCA;
            }

        </style>

        <style type="text/css">

            .schedule-orange, .schedule-orange .fc-event-skin, .schedule-orange a{
                background-color: orange; 
                icon: url("../resources/images/box.png") !important;                
                color: black;
                border-color: darkorange;
            }
            .schedule-yellow, .schedule-yellow .fc-event-skin, .schedule-yellow a{
                background-color: goldenrod; 
                color: black;
                border-color: darkgoldenrod;
            }
            .schedule-blue, .schedule-bluee .fc-event-skin, .schedule-blue a{
                background-color: blue; 
                color: black;
                border-color: darkblue;
            }

            .schedule-gray, .schedule-gray .fc-event-skin, .schedule-gray a{
                background-color: #d4d0c8; 
                color: black;
                border-color: darkgray;
            }

            .schedule-magenta, .schedule-magenta .fc-event-skin, .schedule-magenta a{
                background-color: magenta; 
                color: black;
                border-color: darkmagenta;
            }
            .schedule-green, .schedule-green .fc-event-skin, .schedule-green a{
                background-color: green; 
                color: black;
                border-color: darkgreen;
            }
            .schedule-red, .schedule-red .fc-event-skin, .schedule-red a{
                background-color: red; 
                color: black;
                border-color: darkred;
            }
        </style>
        <script type="text/javascript">
            PrimeFaces.locales['es'] = {
                closeText: 'Cerrar',
                prevText: 'Anterior',
                nextText: 'Siguiente',
                monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
                monthNamesShort: ['Ene', 'Feb', 'Marz', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                dayNames: ['Domingo', 'Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado'],
                dayNamesShort: ['Dom', 'Lun', 'Mart', 'Mie', 'Jue', 'Vie', 'Sab'],
                dayNamesMin: ['S', 'M', 'D', 'M ', 'D', 'F ', 'S'],
                weekHeader: 'Semana',
                FirstDay: 1,
                isRTL: false,
                showMonthAfterYear: false,
                yearSuffix: '',
                timeOnlyTitle: 'Solo el tiempo',
                timeText: 'Tiempo',
                hourText: 'Hora',
                minuteText: 'Minuto',
                secondText: 'Segundo',
                currentText: 'Hoy',
                ampm: false,
                month: 'Mes',
                week: 'Semana',
                day: 'Dia',
                agenda: 'Agenda',
                allDayText: 'Dia entero'
            };
        </script>

        <b:form id="form"  prependId="false"  rendered="#{loginController.loggedIn and applicationMenu.viaje.create}" onkeypress="if (event.keyCode == 13) {
                    return false;
                }">
            <h:panelGroup id="content" layout="block"> 

                <jmoordbjsf:messages id="msg"/>

                <b:panel title="#{msg['titleview.viaje']}" look="primary" >



                    <b:panelGrid id="panel" colSpans="2,10" size="xs" > 




                        <p:outputLabel  value="#{msg['field.fechahorainicioreserva']}"/>

                        <p:fieldset >

                            <jmoordbjsf:calendar
                                pattern="dd/MM/yyyy HH:mm a" value="#{viajeController.viaje.fechahorainicioreserva}" 
                                label="#{msg['field.fechahorainicioreserva']}"
                                listener="#{viajeController.handleSelect}"
                                update=":form:vehiculo, :form:conductor, :form:msg"/>

                            <p:spacer width="25"/>
                            <b:commandButton  look="success"
                                              title="#{msg['label.solicitudpendiente']}"
                                              immediate="true"
                                              iconAwesome="fa-calendar" 
                                              update="solicitudDetails"
                                              action="#{viajeController.prepareScheduleSolicitud()}"
                                              oncomplete="PF('solicitudDialog').show();" />


                        </p:fieldset>


                        <p:outputLabel  value="#{msg['field.fechahorafinreserva']}"  />

                        <jmoordbjsf:calendar
                            pattern="dd/MM/yyyy HH:mm a" value="#{viajeController.viaje.fechahorafinreserva}"
                            label="#{msg['field.fechahorafinreserva']}" 
                            listener="#{viajeController.handleSelect}"
                            update=":form:vehiculo, :form:conductor, :form:msg"/>

                        <p:outputLabel  value="#{msg['field.lugarpartida']}" />
                        <jmoordbjsf:inputText   value="#{viajeController.viaje.lugarpartida}"    />

                        <p:outputLabel  value="#{msg['field.lugardestino']}" />
                        <jmoordbjsf:inputText  value="#{viajeController.viaje.lugardestino}"    />


                        <p:outputLabel value="#{msg['field.vehiculo']}"
                                       id="vehiculolabel" />
                        <p:fieldset>
                            <extensionviaje:autocompletevehiculos id="vehiculo"/>
                            <p:spacer width="25"/>

                            <b:commandButton  look="primary"
                                              immediate="true"
                                              title="#{msg['label.viajevehiculo']}"
                                              iconAwesome="fa-calendar" 
                                              update="vehiculoDetails"
                                              action="#{viajeController.prepareScheduleVehiculo()}"
                                              oncomplete="PF('vehiculoDialog').show();" />


                        </p:fieldset>
                        <p:outputLabel value="#{msg['field.conductor']}"  />
                        <p:fieldset>
                            <extensionviaje:autocompleteconductor id="conductor"/>
                            <p:spacer width="25"/>
                            <b:commandButton  look="primary"
                                              immediate="true"
                                              title="#{msg['label.viajeconductor']}"
                                              iconAwesome="fa-calendar" 
                                              update="conductorDetails"
                                              action="#{viajeController.prepareScheduleConductor()}"
                                              oncomplete="PF('conductorDialog').show();" />


                        </p:fieldset>

                        <p:outputLabel  value="#{msg['field.comentarios']}"/>
                        <b:inputTextarea  requiredMessage="#{msg['field.comentarios']}"
                                          required="true"
                                          rows="2" value="#{viajeController.viaje.comentarios}"  />



                        <p:outputLabel  value="#{msg['field.kmestimados']}" />
                        <jmoordbjsf:inputText  span="5" value="#{viajeController.viaje.kmestimados}"  />

                        <p:outputLabel  value="#{msg['field.costocombustible']}"  />
                        <jmoordbjsf:inputText 
                            label="#{msg['field.costocombustible']}"
                            span="5" value="#{viajeController.viaje.costocombustible}"   />



                        <jmoordbjsf:save rendered="#{applicationMenu.viaje.create}"
                                         save="#{viajeController.save()}" />


                        <b:commandButton immediate="true"
                                         look="primary"
                                         iconAwesome="fa-share" 


                                         rendered="#{applicationMenu.viaje.list}" 
                                         title="#{app['button.search']}" 
                                         action="#{viajeController.prepare('golist',viajeController.viaje)}"/>


                    </b:panelGrid>


                </b:panel>
            </h:panelGroup>


            <p:dialog widgetVar="vehiculoDialog" header="#{msg['dialogo.viajevehiculos']}" 
                      width="850" height="450"
                      styleClass="customDialog"

                      responsive="true"

                      showEffect="clip" hideEffect="clip">
                <b:panelGrid id="vehiculoDetails" colSpans="12" size="xs" > 
                    <p:schedule id="vehiculoSchedule"       
                                rightHeaderTemplate="month,agendaWeek,agendaDay,basicDay"
                                value="#{viajeController.vehiculoScheduleModel}" widgetVar="vehiculoSchedule" timeZone="GMT-5" locale="es">


                    </p:schedule>
                    <b:commandButton value="#{app['button.close']}"
                                     iconAwesome="fa-close"
                                     oncomplete="PF('vehiculoDialog').hide();"/>

                </b:panelGrid>
            </p:dialog>
            <p:dialog widgetVar="conductorDialog" header="#{msg['dialogo.viajeconductor']}" 
                      width="850" height="450"
                      styleClass="customDialog"

                      responsive="true"

                      showEffect="clip" hideEffect="clip">
                <b:panelGrid id="conductorDetails" colSpans="12" size="xs" > 
                    <p:schedule id="conductorSchedule"       
                                rightHeaderTemplate="month,agendaWeek,agendaDay,basicDay"
                                value="#{viajeController.conductorScheduleModel}" widgetVar="conductorSchedule" timeZone="GMT-5" locale="es">


                    </p:schedule>
                    <b:commandButton value="#{app['button.close']}"
                                     iconAwesome="fa-close"
                                     oncomplete="PF('conductorDialog').hide();"/>

                </b:panelGrid>
            </p:dialog>
            <p:dialog widgetVar="solicitudDialog" header="#{msg['dialogo.viajesolicitud']}" 
                      width="850" height="450"
                      styleClass="customDialog"

                      responsive="true"

                      showEffect="clip" hideEffect="clip">
                <b:panelGrid id="solicitudDetails" colSpans="12" size="xs" > 
                    <p:schedule id="solicitudSchedule"       
                                rightHeaderTemplate="month,agendaWeek,agendaDay,basicDay"
                                value="#{viajeController.solicitudScheduleModel}" widgetVar="solicitudSchedule" timeZone="GMT-5" locale="es">


                    </p:schedule>
                    <b:commandButton value="#{app['button.close']}"
                                     iconAwesome="fa-close"
                                     oncomplete="PF('solicitudDialog').hide();"/>

                </b:panelGrid>
            </p:dialog>

        </b:form>
        <jmoordbjsf:denegado renderedcondition="#{!loginController.loggedIn or !applicationMenu.viaje.create}" />

        <br/><br/><br/>
    </ui:define>
</ui:composition>
